/** @file
  Copyright (c) 2020 - 2021, Baikal Electronics, JSC. All rights reserved.<BR>
  SPDX-License-Identifier: BSD-2-Clause-Patent
**/

#ifndef PCIE_H_
#define PCIE_H_

enum {
  BM1000_PCIE0_IDX = 0, // PCIe0 (x4 #0)
  BM1000_PCIE1_IDX,     // PCIe1 (x4 #1)
  BM1000_PCIE2_IDX      // PCIe2 (x8)
};

#define BM1000_PCIE_GPR_STATUS_LTSSM_STATE_MASK  0x3F
#define BM1000_PCIE_GPR_STATUS_LTSSM_STATE_L0    0x11

#define BM1000_PCIE0_CDM_BASE     0x02200000
#define BM1000_PCIE0_CDM_SIZE     0x10000
#define BM1000_PCIE0_DYNIO0_BASE  0x40100000
#define BM1000_PCIE0_DYNIO0_SIZE  0xFF00000
#define BM1000_PCIE0_DYNIO1_BASE  0x400000000
#define BM1000_PCIE0_DYNIO1_SIZE  0x100000000
#define BM1000_PCIE0_DYNIO2_BASE  0x4000000000
#define BM1000_PCIE0_DYNIO2_SIZE  0x1000000000
#define BM1000_PCIE0_MMIO32_BASE  (BM1000_PCIE0_DYNIO0_BASE)
#define BM1000_PCIE0_MMIO32_SIZE  (BM1000_PCIE0_DYNIO0_SIZE - BM1000_PCIE0_PORTIO_SIZE)
#define BM1000_PCIE0_CFG_BASE     (BM1000_PCIE0_DYNIO1_BASE)
#define BM1000_PCIE0_CFG_SIZE     0xFF00000
#define BM1000_PCIE0_PORTIO_BASE  (BM1000_PCIE0_DYNIO0_BASE + BM1000_PCIE0_DYNIO0_SIZE - BM1000_PCIE0_PORTIO_SIZE)
#define BM1000_PCIE0_PORTIO_MIN   0
#define BM1000_PCIE0_PORTIO_SIZE  0x100000

#define BM1000_PCIE1_CDM_BASE     0x02210000
#define BM1000_PCIE1_CDM_SIZE     0x10000
#define BM1000_PCIE1_DYNIO0_BASE  0x50000000
#define BM1000_PCIE1_DYNIO0_SIZE  0x10000000
#define BM1000_PCIE1_DYNIO1_BASE  0x500000000
#define BM1000_PCIE1_DYNIO1_SIZE  0x100000000
#define BM1000_PCIE1_DYNIO2_BASE  0x5000000000
#define BM1000_PCIE1_DYNIO2_SIZE  0x1000000000
#define BM1000_PCIE1_MMIO32_BASE  (BM1000_PCIE1_DYNIO0_BASE)
#define BM1000_PCIE1_MMIO32_SIZE  (BM1000_PCIE1_DYNIO0_SIZE - BM1000_PCIE1_PORTIO_SIZE)
#define BM1000_PCIE1_CFG_BASE     (BM1000_PCIE1_DYNIO1_BASE)
#define BM1000_PCIE1_CFG_SIZE     0xFF00000
#define BM1000_PCIE1_PORTIO_BASE  (BM1000_PCIE1_DYNIO0_BASE + BM1000_PCIE1_DYNIO0_SIZE - BM1000_PCIE1_PORTIO_SIZE)
#define BM1000_PCIE1_PORTIO_MIN   0x100000
#define BM1000_PCIE1_PORTIO_SIZE  0x100000

#define BM1000_PCIE2_CDM_BASE     0x02220000
#define BM1000_PCIE2_CDM_SIZE     0x10000
#define BM1000_PCIE2_DYNIO0_BASE  0x60000000U
#define BM1000_PCIE2_DYNIO0_SIZE  0x20000000
#define BM1000_PCIE2_DYNIO1_BASE  0x600000000
#define BM1000_PCIE2_DYNIO1_SIZE  0x200000000
#define BM1000_PCIE2_DYNIO2_BASE  0x6000000000
#define BM1000_PCIE2_DYNIO2_SIZE  0x2000000000
#define BM1000_PCIE2_MMIO32_BASE  (BM1000_PCIE2_DYNIO0_BASE)
#define BM1000_PCIE2_MMIO32_SIZE  (BM1000_PCIE2_DYNIO0_SIZE - BM1000_PCIE2_PORTIO_SIZE)
#define BM1000_PCIE2_CFG_BASE     (BM1000_PCIE2_DYNIO1_BASE)
#define BM1000_PCIE2_CFG_SIZE     0xFF00000
#define BM1000_PCIE2_PORTIO_BASE  (BM1000_PCIE2_DYNIO0_BASE + BM1000_PCIE2_DYNIO0_SIZE - BM1000_PCIE2_PORTIO_SIZE)
#define BM1000_PCIE2_PORTIO_MIN   0x200000
#define BM1000_PCIE2_PORTIO_SIZE  0x100000

#define BM1000_PCIE_BUS_MINS { \
  0,                           \
  0,                           \
  0                            \
}

#define BM1000_PCIE_BUS_MAXS { \
  0xFF,                        \
  0xFF,                        \
  0xFF                         \
}

#define BM1000_PCIE_CDM_BASES { \
  BM1000_PCIE0_CDM_BASE,        \
  BM1000_PCIE1_CDM_BASE,        \
  BM1000_PCIE2_CDM_BASE         \
}

#define BM1000_PCIE_CFG_BASES { \
  BM1000_PCIE0_CFG_BASE,        \
  BM1000_PCIE1_CFG_BASE,        \
  BM1000_PCIE2_CFG_BASE         \
}

#define BM1000_PCIE_MMIO32_BASES { \
  BM1000_PCIE0_MMIO32_BASE,        \
  BM1000_PCIE1_MMIO32_BASE,        \
  BM1000_PCIE2_MMIO32_BASE         \
}

#define BM1000_PCIE_MMIO32_SIZES { \
  BM1000_PCIE0_MMIO32_SIZE,        \
  BM1000_PCIE1_MMIO32_SIZE,        \
  BM1000_PCIE2_MMIO32_SIZE         \
}

#define BM1000_PCIE_PORTIO_BASES { \
  BM1000_PCIE0_PORTIO_BASE,        \
  BM1000_PCIE1_PORTIO_BASE,        \
  BM1000_PCIE2_PORTIO_BASE         \
}

#define BM1000_PCIE_PORTIO_SIZES { \
  BM1000_PCIE0_PORTIO_SIZE,        \
  BM1000_PCIE1_PORTIO_SIZE,        \
  BM1000_PCIE2_PORTIO_SIZE         \
}

#define BM1000_PCIE_PORTIO_MINS { \
  BM1000_PCIE0_PORTIO_MIN,        \
  BM1000_PCIE1_PORTIO_MIN,        \
  BM1000_PCIE2_PORTIO_MIN         \
}

#define BM1000_PCIE_PORTIO_MAXS {             \
  (0 << 20) | (BM1000_PCIE0_PORTIO_SIZE - 1), \
  (1 << 20) | (BM1000_PCIE1_PORTIO_SIZE - 1), \
  (2 << 20) | (BM1000_PCIE2_PORTIO_SIZE - 1)  \
}

#endif // PCIE_H_
